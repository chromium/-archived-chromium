# Copyright (c) 2006-2008 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

Import('env')

env = env.Clone()

if env.WantSystemLib('lzma_sdk'):
  Return()

env.Prepend(
    CPPPATH = [
        '.',
        '$CHROME_SRC_DIR',
    ]
)

env.Append(
    CPPDEFINES = [
        '_LZMA_PROB32',
        '_LZMA_IN_CB',
    ],
)

if env.Bit('windows'):
  env.Append(
    CCFLAGS = [
        '/TC',
        '/wd4800',
    ],
  )

input_files = [
    '7zCrc.c',
    'Archive/7z/7zAlloc.c',
    'Archive/7z/7zBuffer.c',
    'Archive/7z/7zDecode.c',
    'Archive/7z/7zExtract.c',
    'Archive/7z/7zHeader.c',
    'Archive/7z/7zIn.c',
    'Archive/7z/7zItem.c',
    'Archive/7z/7zMethodID.c',
    'Compress/Branch/BranchX86.c',
    'Compress/Branch/BranchX86_2.c',
    'Compress/Lzma/LzmaDecode.c',
]

env.ChromeStaticLibrary('lzma_sdk', input_files)
