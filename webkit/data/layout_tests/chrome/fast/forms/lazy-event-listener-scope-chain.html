<html>

<script>
if (window.layoutTestController)
  layoutTestController.dumpAsText();

function run_test(x) {
  var r = document.getElementById('result');
  r.innerHTML = x + '<br>';
}

function setup() {
  var f = document.getElementsByTagName('form')[0];
  f.old_f = f.onsubmit;
  f.onsubmit = function() {this.old_f();};
  f.login.click();
}

</script>
This test tests that a lazy event listener attached to a form element
keeps its form in the scope chain when the listener is called by 
javascript. <br>

<body onload="setup()">
<form action="javascript:void(0)" onsubmit="run_test(username.value)">
<input type="text" value="abc" name="username"/>
<input type="submit" name="login" value="Login"/>
</form>

<div id="result"></div>
</body>
</html>
